default_platform(:ios)

platform :ios do

  lane :register_app do
    produce(app_name: "ithreeHelloWorld")
  end

  lane :get_development_cert do
    cert(development: true)
  end

  lane :get_development_provisioning_profile do
    sigh(development: true)
  end

  lane :get_dev_certs do
    get_development_cert
    get_development_provisioning_profile
  end

  desc "Sync team Development assets"
  lane :sync_all_development do
    sync_device_info
    match(type: "development")
  end

  desc "Update iOS UDUD's on Developer Portal"
  lane :sync_device_info do
    register_devices(
      devices:{
        devices_file: "fastlane/Devicefile.txt"
      }
    )
  end

  lane :bootstrap_code_signing do
    sync_device_info
    match(type: "development")
    match(type: "adhoc")
    match(type: "appstore")
  end
end
